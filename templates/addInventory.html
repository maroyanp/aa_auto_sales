{% extends "base.html" %}

{% block title %}Admin | A & A Auto Sales{% endblock %}

{% block content %}

    <section class="admin-intro">
        <h1>Admin Page</h1>
        <p>Welcome to the admin page. Here you can manage the inventory.</p>
    </section>

    <section class="add-car">
        <h2>Add a New Vehicle</h2>
        <form action="{{ url_for('addInventory') }}" method="post" enctype="multipart/form-data">
            {{ form.hidden_tag() }}
            <div class="form-group">
                {{ form.make.label }}<br>
                {{ form.make(size=32) }}<br>
                {% for error in form.make.errors %}
                    <span class="error">{{ error }}</span>
                {% endfor %}
            </div>
            <div class="form-group">
                {{ form.model.label }}<br>
                {{ form.model(size=32) }}<br>
                {% for error in form.model.errors %}
                    <span class="error">{{ error }}</span>
                {% endfor %}
            </div>
            <div class="form-group">
                {{ form.year.label }}<br>
                {{ form.year(size=32) }}<br>
                {% for error in form.year.errors %}
                    <span class="error">{{ error }}</span>
                {% endfor %}
            </div>
            <div class="form-group">
                {{ form.price.label }}<br>
                {{ form.price(size=32) }}<br>
                {% for error in form.price.errors %}
                    <span class="error">{{ error }}</span>
                {% endfor %}
            </div>
            <div class="form-group">
                {{ form.kilometers.label }}<br>
                {{ form.kilometers(size=32) }}<br>
                {% for error in form.kilometers.errors %}
                    <span class="error">{{ error }}</span>
                {% endfor %}
            </div>
            <div class="form-group">
                {{form.image.label }}<br>
                {{ form.image() }}<br>
                {% for error in form.image.errors %}
                    <span class="error">{{ error }}</span>
                {% endfor %}
            </div>
            <div class="form-group submit-group">
                {{ form.submit() }}
            </div>
        </form>

        </section>

    <!-- this will be a search to see what car to delete -->
    <section class="del-car">
        <h1>Delete Vehicles</h1>
        {% if cars %}
            <ul class="car-list">
                {% for car in cars %}
                    <li class="car-item">
                        <div class="car-info">
                            <strong>{{ car.make }} {{ car.model }} ({{ car.year }})</strong><br>
                            <img src="{{ url_for('static', filename='uploads/' ~ car.image_filename) }}" 
                                alt="{{ car.make }} {{ car.model }}" width="120">
                        </div>
                        <form method="POST" action="{{ url_for('addInventory') }}" class="delete-form">
                            {{ form.hidden_tag() }}  <!-- for CSRF -->
                            <input type="hidden" name="delete_id" value="{{ car.id }}">
                            <button type="submit" class="delete-btn">Delete</button>
                        </form>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No vehicles available at the moment.</p>
        {% endif %}
    </section>

    <section class="logout">
        <form action="{{ url_for('logout') }}" method="post">
            <button type="submit" class="logout-btn">Logout</button>
        </form>
    </section>





{% endblock %}